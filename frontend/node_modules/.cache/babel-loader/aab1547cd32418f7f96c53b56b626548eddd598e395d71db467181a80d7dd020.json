{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import{Card,CardActionArea,CardContent,Typography,Button}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StatePage=()=>{const{stateCode}=useParams();const navigate=useNavigate();const[sessionId,setSessionId]=useState(null);// const [billGeneralInfo, setBillGeneralInfo] = useState(null);\nconst[posts,setPosts]=useState([]);const[visibleCards,setVisibleCards]=useState(6);// state variable for visible cards\nuseEffect(()=>{// getSessionList - retrieves sessions by year\n// getMasterList - retireves master bill list by session\nlet sessionId;axios.post(\"https://api.legiscan.com/?key=6ef4e9b53f820698d5d6a447dc7499c7&op=getSessionList&state=\".concat(stateCode)).then(response=>{console.log('resp data : ',response.data.sessions);const fetchedSessionId=''+response.data.sessions[0].session_id;console.log('session_id for most recent session : ',fetchedSessionId);setSessionId(fetchedSessionId);// setPosts(response.data.sessions);\n}).catch(error=>{console.error(\"ERROR FETCHING DATA : \",error);});},[stateCode]);// what does stateCode do here??\nuseEffect(()=>{if(sessionId){console.log(\"THE ID : \",sessionId);axios.post(\"https://api.legiscan.com/?key=6ef4e9b53f820698d5d6a447dc7499c7&op=getMasterList&id=\".concat(sessionId)).then(response=>{console.log('RESP DATA FOR THIS SESSION : ',response.data.masterlist);const bills=Object.values(response.data.masterlist);setPosts(bills);}).catch(error=>{console.error(\"ERROR FETCHING DATA : \",error);});}},[sessionId]);const handleCardClick=billId=>{navigate(\"/bill/\".concat(billId));};const handleShowMore=()=>{setVisibleCards(prevVisibleCards=>prevVisibleCards+6);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Recent \",stateCode,\" Bills\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'16px'},children:posts.slice(0,visibleCards).map(post=>/*#__PURE__*/_jsx(Card,{style:{maxWidth:345},onClick:()=>handleCardClick(post.bill_id),children:/*#__PURE__*/_jsx(CardActionArea,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"div\",children:post.number}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:post.title})]})})},post.bill_id))}),visibleCards<posts.length&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',marginTop:'16px'},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleShowMore,children:\"See More\"})})]});};export default StatePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","Card","CardActionArea","CardContent","Typography","Button","jsx","_jsx","jsxs","_jsxs","StatePage","stateCode","navigate","sessionId","setSessionId","posts","setPosts","visibleCards","setVisibleCards","post","concat","then","response","console","log","data","sessions","fetchedSessionId","session_id","catch","error","masterlist","bills","Object","values","handleCardClick","billId","handleShowMore","prevVisibleCards","children","style","display","flexWrap","gap","slice","map","maxWidth","onClick","bill_id","gutterBottom","variant","component","number","color","title","length","justifyContent","marginTop"],"sources":["/Users/ishanidas/Desktop/informedvotr-depl/frontend/src/StatePage.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nimport { Card, CardActionArea, CardContent, Typography, Button } from '@mui/material';\n\n\n\n\n\nconst StatePage = () => {\n  const { stateCode } = useParams();\n  const navigate = useNavigate();\n  const [sessionId, setSessionId] = useState(null);\n  // const [billGeneralInfo, setBillGeneralInfo] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [visibleCards, setVisibleCards] = useState(6); // state variable for visible cards\n\n\n  useEffect(() => {\n    // getSessionList - retrieves sessions by year\n    // getMasterList - retireves master bill list by session\n    let sessionId;\n    axios.post(`https://api.legiscan.com/?key=6ef4e9b53f820698d5d6a447dc7499c7&op=getSessionList&state=${stateCode}`).then(response => {\n        console.log('resp data : ', response.data.sessions)\n        const fetchedSessionId = ''+response.data.sessions[0].session_id;\n        console.log('session_id for most recent session : ', fetchedSessionId)\n        setSessionId(fetchedSessionId)\n\n        // setPosts(response.data.sessions);\n    }).catch(error => {\n        console.error(\"ERROR FETCHING DATA : \", error)\n    });\n    \n  }, [stateCode]); // what does stateCode do here??\n\n  useEffect(() => {\n\n    if(sessionId) { \n        console.log(\"THE ID : \", sessionId)\n\n        axios.post(`https://api.legiscan.com/?key=6ef4e9b53f820698d5d6a447dc7499c7&op=getMasterList&id=${sessionId}`).then(response => {\n            console.log('RESP DATA FOR THIS SESSION : ', response.data.masterlist)\n            const bills = Object.values(response.data.masterlist);\n            setPosts(bills);\n        }).catch(error => {\n            console.error(\"ERROR FETCHING DATA : \", error)\n        })\n    }\n    \n  }, [sessionId]);\n\n  const handleCardClick = (billId) => {\n    navigate(`/bill/${billId}`);\n  };\n\n  const handleShowMore = () => {\n    setVisibleCards(prevVisibleCards => prevVisibleCards + 6);\n  };\n\n  return (\n    <div>\n      <br />\n      <h1>Recent {stateCode} Bills</h1>\n      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '16px' }}>\n        {posts.slice(0,visibleCards).map(post => (\n          <Card key={post.bill_id} style={{ maxWidth: 345 }} onClick={() => handleCardClick(post.bill_id)}>\n            <CardActionArea>\n              <CardContent>\n                <Typography gutterBottom variant=\"h5\" component=\"div\">\n                  {post.number}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {post.title}\n                </Typography>\n              </CardContent>\n            </CardActionArea>\n          </Card>\n        ))}\n      </div>\n      {visibleCards < posts.length && (\n        <div style={{ display: 'flex', justifyContent: 'center', marginTop: '16px' }}>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleShowMore}>\n            See More\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default StatePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}